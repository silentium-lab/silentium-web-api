import{give as t,SourceWithPool as e,Guest as r,value as s,GuestCast as o}from"patron-oop";class n{constructor(t){this.pageSource=t}watchPop(){window.addEventListener("popstate",(e=>{const{state:r}=e;r?.url&&t(r.url,this.pageSource)}))}}class i{give(t){return t===location.href.replace(location.origin,"")||history.pushState({url:t,date:Date.now()},"Loading...",t),this}}var c=Object.defineProperty,a=(t,e,r)=>((t,e,r)=>e in t?c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);class u{constructor(t){this.errors=t,a(this,"source",new e)}do(){return new r((t=>{fetch(t.url,t).then((e=>e.ok?t.asJson?e.json():e.text():Promise.reject(new Error("Error of status "+e.status)))).then((t=>{this.source.give(t)})).catch((t=>{this.errors.give(t)}))}))}result(){return this.source}}class l{constructor(t){this.selector=t}value(e){return s(this.selector,new o(e,(r=>{const s=document.querySelector(r);if(s)t(s,e);else{const s=document.body,o={childList:!0,subtree:!0},n=new MutationObserver((s=>{for(const o of s)if("childList"===o.type){const s=document.querySelector(r);if(s){t(s,e),n.disconnect();break}}}));n.observe(s,o)}}))),this}}class h{constructor(t,e,r=""){this.element=t,this.attrName=e,this.defaultValue=r}value(e){return s(this.element,new o(e,(r=>{t(r.getAttribute(this.attrName)||this.defaultValue,e)}))),this}}class d{give(t){const e=document.createElement("style");return e.textContent=t,document.head.appendChild(e),this}}class p{constructor(t=""){this.title=t}introduction(){return"patron"}give(t){return console.log("LOG: ",this.title,t),this}}export{h as Attribute,l as Element,u as Fetched,i as HistoryNewPage,n as HistoryPoppedPage,p as Log,d as StyleInstalled};
//# sourceMappingURL=patron-web-api.min.mjs.map
