import{Message as e,Tap as t}from"silentium";function r(r,n,o){return e((function(){const e=new AbortController;o&&o.pipe(t((t=>{t&&e.abort()}))),r.pipe(t((t=>{const{baseUrl:r,url:o,method:s,credentials:i,headers:c,body:u,query:a}=t;let l;try{l=new URL(String(o),r)}catch{return void n?.use(new Error("Invalid URL"))}Object.entries(a??{}).forEach((([e,t])=>l.searchParams.append(e,String(t))));const d={method:s,credentials:i,headers:c,body:u,signal:e.signal};fetch(l.toString(),d).then((e=>e.text())).then((e=>this.use(e))).catch((e=>{e?.(e)}))})))}))}function n(r,n){return e((function(){r.pipe(t((e=>{try{this.use({...e,headers:{...e.headers??{},"Content-Type":"application/json"},body:JSON.stringify(e.body)})}catch{n?.use(new Error("Failed to parse JSON"))}})))}))}function o(r){return e((function(){r.pipe(t((e=>{const t=document.querySelectorAll(e);if(t.length>0)this.use(Array.from(t));else{const t=document,r={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id"]},n=new MutationObserver((t=>{for(const r of t)if("childList"===r.type){if((t=>{for(const r of Array.from(t))if(r.nodeType===Node.ELEMENT_NODE){const t=r;if(t.matches&&t.matches(e)){const t=document.querySelectorAll(e);if(t.length>0)return this.use(Array.from(t)),n.disconnect(),!0}if(t.querySelector&&t.querySelector(e)){const t=document.querySelectorAll(e);if(t.length>0)return this.use(Array.from(t)),n.disconnect(),!0}}return!1})(r.addedNodes))break}else if("attributes"===r.type){const t=r.target;if(t.matches&&t.matches(e)){const t=document.querySelectorAll(e);if(t.length>0){this.use(Array.from(t)),n.disconnect();break}}}}));n.observe(t,r)}})))}))}function s(r){return e((function(){r.pipe(t((e=>{const t=document.querySelector(e);if(t)this.use(t);else{const t=document,r={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id"]},n=new MutationObserver((t=>{for(const r of t)if("childList"===r.type){if((t=>{for(const r of Array.from(t))if(r.nodeType===Node.ELEMENT_NODE){const t=r;if(t.matches&&t.matches(e))return this.use(t),n.disconnect(),!0;if(t.querySelector&&t.querySelector(e)){const r=t.querySelector(e);return this.use(r),n.disconnect(),!0}}return!1})(r.addedNodes))break}else if("attributes"===r.type){const t=r.target;if(t.matches&&t.matches(e)){this.use(t),n.disconnect();break}}}));n.observe(t,r)}})))}))}function i(e){return t((t=>{console.log(e,t)}))}function c(t){return e((e=>{setTimeout((()=>{e.use(t)}),t)}))}export{s as Element,o as Elements,r as FetchedData,i as Log,n as RequestJson,c as Timer};
//# sourceMappingURL=silentium-web-api.min.mjs.map
