import{Event as e,Transport as t,All as r}from"silentium";function n(r,n,o){return e((e=>{const s=new AbortController;o&&o.event(t((e=>{e&&s.abort()}))),r.event(t((t=>{const{baseUrl:r,url:o,method:c,credentials:i,headers:u,body:a,query:l}=t;let d;try{d=new URL(String(o),r)}catch{return void n?.use(new Error("Invalid URL"))}Object.entries(l??{}).forEach((([e,t])=>d.searchParams.append(e,String(t))));const h={method:c,credentials:i,headers:u,body:a,signal:s.signal};fetch(d.toString(),h).then((e=>e.text())).then((t=>e.use(t))).catch((e=>{e?.(e)}))})))}))}function o(r,n){return e((e=>{r.event(t((t=>{try{e.use({...t,headers:{...t.headers??{},"Content-Type":"application/json"},body:JSON.stringify(t.body)})}catch{n?.use(new Error("Failed to parse JSON"))}})))}))}function s(r){return e((e=>{r.event(t((t=>{const r=document.querySelectorAll(t);if(r.length)e.use(Array.from(r));else{const r=document.body,n={childList:!0,subtree:!0},o=new MutationObserver((r=>{for(const n of r)if("childList"===n.type){const r=document.querySelectorAll(t);if(r){e.use(Array.from(r)),o.disconnect();break}}}));o.observe(r,n)}})))}))}function c(n,o){return e((e=>{r(n,o).event(t((([t,r])=>{console.log("LOG:",r,t),e.use(t)})))}))}function i(t){return e((e=>{setTimeout((()=>{e.use(t)}),t)}))}export{s as Elements,n as FetchedData,c as Log,o as RequestJson,i as Timer};
//# sourceMappingURL=silentium-web-api.min.mjs.map
