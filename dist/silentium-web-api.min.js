var silentiumWebApi=function(e,t){"use strict";return e.Element=function(e){return t.Message((r=>{e.to(t.Transport((e=>{const t=document.querySelector(e);if(t)r.use(t);else{const t=document,n={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id"]},s=new MutationObserver((t=>{for(const n of t)if("childList"===n.type){if((t=>{for(const n of Array.from(t))if(n.nodeType===Node.ELEMENT_NODE){const t=n;if(t.matches&&t.matches(e))return r.use(t),s.disconnect(),!0;if(t.querySelector&&t.querySelector(e)){const n=t.querySelector(e);return r.use(n),s.disconnect(),!0}}return!1})(n.addedNodes))break}else if("attributes"===n.type){const t=n.target;if(t.matches&&t.matches(e)){r.use(t),s.disconnect();break}}}));s.observe(t,n)}})))}))},e.Elements=function(e){return t.Message((r=>{e.to(t.Transport((e=>{const t=document.querySelectorAll(e);if(t.length>0)r.use(Array.from(t));else{const t=document,n={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id"]},s=new MutationObserver((t=>{for(const n of t)if("childList"===n.type){if((t=>{for(const n of Array.from(t))if(n.nodeType===Node.ELEMENT_NODE){const t=n;if(t.matches&&t.matches(e)){const t=document.querySelectorAll(e);if(t.length>0)return r.use(Array.from(t)),s.disconnect(),!0}if(t.querySelector&&t.querySelector(e)){const t=document.querySelectorAll(e);if(t.length>0)return r.use(Array.from(t)),s.disconnect(),!0}}return!1})(n.addedNodes))break}else if("attributes"===n.type){const t=n.target;if(t.matches&&t.matches(e)){const t=document.querySelectorAll(e);if(t.length>0){r.use(Array.from(t)),s.disconnect();break}}}}));s.observe(t,n)}})))}))},e.FetchedData=function(e,r,n){return t.Message((s=>{const o=new AbortController;n&&n.to(t.Transport((e=>{e&&o.abort()}))),e.to(t.Transport((e=>{const{baseUrl:t,url:n,method:c,credentials:i,headers:a,body:u,query:l}=e;let d;try{d=new URL(String(n),t)}catch{return void r?.use(new Error("Invalid URL"))}Object.entries(l??{}).forEach((([e,t])=>d.searchParams.append(e,String(t))));const f={method:c,credentials:i,headers:a,body:u,signal:o.signal};fetch(d.toString(),f).then((e=>e.text())).then((e=>s.use(e))).catch((e=>{e?.(e)}))})))}))},e.Log=function(e){return t.Transport((t=>{console.log(e,t)}))},e.RequestJson=function(e,r){return t.Message((n=>{e.to(t.Transport((e=>{try{n.use({...e,headers:{...e.headers??{},"Content-Type":"application/json"},body:JSON.stringify(e.body)})}catch{r?.use(new Error("Failed to parse JSON"))}})))}))},e.Timer=function(e){return t.Message((t=>{setTimeout((()=>{t.use(e)}),e)}))},e}({},silentium);
