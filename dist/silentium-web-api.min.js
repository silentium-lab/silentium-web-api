!function(e,r){"use strict";class t extends r.TheInformation{constructor(e,r,t){super(e,t),this.requestSrc=e,this.errorOwner=r,this.abortSrc=t}value(e){const t=new AbortController;return this.abortSrc&&this.abortSrc.value(new r.From((e=>{e&&t.abort()}))),this.requestSrc.value(new r.From((r=>{const{baseUrl:s,url:o,method:n,credentials:i,headers:c,body:a,query:l}=r;let h;try{h=new URL(String(o),s)}catch{return void this.errorOwner?.give(new Error("Invalid URL"))}Object.entries(l??{}).forEach((([e,r])=>h.searchParams.append(e,String(r))));const u={method:n,credentials:i,headers:c,body:a,signal:t.signal};fetch(h.toString(),u).then((e=>e.text())).then((r=>e.give(r))).catch((e=>{this.errorOwner?.give(e)}))}))),this}}class s extends r.TheInformation{constructor(e,r){super(e,r),this.requestSrc=e,this.errorOwner=r}value(e){return this.requestSrc.value(new r.From((r=>{try{e.give({...r,headers:{...r.headers??{},"Content-Type":"application/json"},body:JSON.stringify(r.body)})}catch{this.errorOwner?.give(new Error("Failed to parse JSON"))}}))),this}}class o extends r.TheInformation{constructor(e){super(e),this.selectorSrc=e}value(e){return this.selectorSrc.value(new r.From((r=>{const t=document.querySelectorAll(r);if(t.length)e.give(Array.from(t));else{const t=document.body,s={childList:!0,subtree:!0},o=new MutationObserver((t=>{for(const s of t)if("childList"===s.type){const t=document.querySelectorAll(r);if(t){e.give(Array.from(t)),o.disconnect();break}}}));o.observe(t,s)}}))),this}}class n extends r.TheInformation{constructor(e,r){super(e,r),this.sourceSrc=e,this.titleSrc=r}value(e){return new r.All(this.sourceSrc,this.titleSrc).value(new r.From((([r,t])=>{console.log("LOG:",t,r),e.give(r)}))),this}}e.Elements=o,e.FetchedData=t,e.Log=n,e.RequestJson=s}({},silentium);
