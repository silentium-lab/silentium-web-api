!function(e,t){"use strict";var s=Object.defineProperty,r=(e,t,r)=>((e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);e.Attribute=class{constructor(e,t,s=""){this.element=e,this.attrName=t,this.defaultValue=s}value(e){return t.value(this.element,new t.GuestCast(e,(s=>{t.give(s.getAttribute(this.attrName)||this.defaultValue,e)}))),this}},e.Element=class{constructor(e){this.selector=e}value(e){return t.value(this.selector,new t.GuestCast(e,(s=>{const r=document.querySelector(s);if(r)t.give(r,e);else{const r=document.body,o={childList:!0,subtree:!0},i=new MutationObserver((r=>{for(const o of r)if("childList"===o.type){const r=document.querySelector(s);if(r){t.give(r,e),i.disconnect();break}}}));i.observe(r,o)}}))),this}},e.Fetched=class{constructor(e){this.errors=e,r(this,"source",new t.SourceChangeable)}do(){return new t.Guest((e=>{fetch(e.url,e).then((t=>t.ok?e.asJson?t.json():t.text():Promise.reject(new Error("Error of status "+t.status)))).then((e=>{this.source.give(e)})).catch((e=>{this.errors.give(e)}))}))}result(){return this.source}},e.HistoryNewPage=class{give(e){return e===location.href.replace(location.origin,"")||history.pushState({url:e,date:Date.now()},"Loading...",e),this}},e.HistoryPoppedPage=class{constructor(e){this.pageSource=e}watchPop(){window.addEventListener("popstate",(e=>{const{state:s}=e;s?.url&&t.give(s.url,this.pageSource)}))}},e.Log=class{constructor(e=""){this.title=e}introduction(){return"patron"}give(e){return console.log("LOG: ",this.title,e),this}},e.StyleInstalled=class{give(e){const t=document.createElement("style");return t.textContent=e,document.head.appendChild(t),this}}}({},silentium);
