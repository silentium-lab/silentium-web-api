!function(e,t){"use strict";e.attribute=(e,r,n="")=>{const o=t.sourceOf();return t.subSourceMany(o,[e,r,n]),t.value(t.sourceAll([e,r,n]),t.patron((([e,r,n])=>{t.give(e.getAttribute(r)||n,o)}))),o},e.classToggled=(e,r)=>t.sourceCombined(e,r)(((e,r,n)=>{r.classList.toggle(n),t.give(n,e)})),e.element=(e,r,n)=>o=>{t.value(t.sourceAll([n,r]),t.guestCast(o,(([r,n])=>{const l=n.querySelector(r);if(l)t.give(l,o);else{if(!e)throw new Error(`Element with selector=${r} was not found!`);{const l=n.body,s={childList:!0,subtree:!0},u=e.get((e=>{for(const l of e)if("childList"===l.type){const e=n.querySelector(r);if(e){t.give(e,o),u.disconnect();break}}}));u.observe(l,s)}}})))},e.fetched=(e,r,n)=>{const o=t.sourceOf();return t.value(t.sourceAll([r,e]),t.patron((([e,r])=>{r.fetch(e.url,{...e,url:void 0}).then((e=>{let t;return t="application/json"===e.headers.get("Content-Type")?e.json():e.text(),e.ok?t:Promise.reject(t)})).then((e=>{t.give(e,o)})).catch((e=>{t.give(e,n)}))}))),o},e.historyNewPate=(e,r)=>(t.value(t.sourceAll([r,e]),t.patron((([e,t])=>{t.pushState({url:e,date:Date.now()},"",e)}))),r),e.historyPoppedPage=(e,r)=>{const n=t.sourceOf(),o=e=>{const{state:r}=e;r?.url&&t.give(String(r.url),n)};return t.value(e,t.patronOnce((e=>{e.addEventListener("popstate",o)}))),t.value(r,t.patronOnce((()=>{t.destroy([n]),t.value(e,(e=>{e.removeEventListener("popstate",o)}))}))),n},e.html=(e,r)=>(t.value(t.sourceAll([r,e]),t.patron((([e,t])=>{t.innerHTML=e}))),r),e.input=(e,r)=>{const n=()=>{t.value(r,(t=>{e.give(t.value)}))};let o=null;return t.value(r,t.patron((e=>{o&&(e.removeEventListener("keyup",n),e.removeEventListener("change",n)),e.addEventListener("keyup",n),e.addEventListener("change",n),o=e}))),t.value(t.sourceAll([e,r]),t.patron((([e,t])=>{t.value=String(e)}))),e},e.link=(e,r,n=t.source("href"))=>{const o=t.sourceOf();return t.value(t.sourceAll([e,r,n]),(([e,t,r])=>{e.addEventListener("click",(e=>{if(null!==e.target&&"matches"in e.target&&"function"==typeof e.target.matches&&e.target.matches(t)){e.preventDefault();const t=e?.target?.getAttribute(r);t&&o.give(t)}}))})),o},e.log=(e,r,n)=>{const o=t.sourceAll([n,r,e]);return t.value(o,t.patron((([e,t,r])=>{r.log("LOG:",t,e)}))),n},e.styleInstalled=(e,r)=>n=>{t.value(t.sourceAll([e,r]),t.guestCast(n,(([e,r])=>{const o=e.createElement("style");o.textContent=r,e.head.appendChild(o),t.give(r,n)})))},e.text=(e,r)=>(t.value(t.sourceAll([e,r]),t.patron((([e,t])=>{t.textContent=e}))),e)}({},silentium);
