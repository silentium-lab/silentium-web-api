var silentiumWebApi=function(e,t){"use strict";return e.Elements=function(e){return t.Event((n=>{e.event(t.Transport((e=>{const t=document.querySelectorAll(e);if(t.length)n.use(Array.from(t));else{const t=document.body,r={childList:!0,subtree:!0},o=new MutationObserver((t=>{for(const r of t)if("childList"===r.type){const t=document.querySelectorAll(e);if(t){n.use(Array.from(t)),o.disconnect();break}}}));o.observe(t,r)}})))}))},e.FetchedData=function(e,n,r){return t.Event((o=>{const s=new AbortController;r&&r.event(t.Transport((e=>{e&&s.abort()}))),e.event(t.Transport((e=>{const{baseUrl:t,url:r,method:c,credentials:i,headers:a,body:u,query:l}=e;let d;try{d=new URL(String(r),t)}catch{return void n?.use(new Error("Invalid URL"))}Object.entries(l??{}).forEach((([e,t])=>d.searchParams.append(e,String(t))));const h={method:c,credentials:i,headers:a,body:u,signal:s.signal};fetch(d.toString(),h).then((e=>e.text())).then((e=>o.use(e))).catch((e=>{e?.(e)}))})))}))},e.Log=function(e){return t.Transport((t=>{console.log(e,t)}))},e.RequestJson=function(e,n){return t.Event((r=>{e.event(t.Transport((e=>{try{r.use({...e,headers:{...e.headers??{},"Content-Type":"application/json"},body:JSON.stringify(e.body)})}catch{n?.use(new Error("Failed to parse JSON"))}})))}))},e.Timer=function(e){return t.Event((t=>{setTimeout((()=>{t.use(e)}),e)}))},e}({},silentium);
