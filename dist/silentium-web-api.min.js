!function(e,t){"use strict";e.attribute=(e,n,r="")=>{const o=t.sourceOf();return t.subSourceMany(o,[e,n,r]),t.value(t.sourceAll([e,n,r]),t.patron((([e,n,r])=>{t.give(e.getAttribute(n)||r,o)}))),o},e.element=(e,n,r)=>o=>{t.value(t.sourceAll([r,n]),t.guestCast(o,(([n,r])=>{const s=r.querySelector(n);if(s)t.give(s,o);else{if(!e)throw new Error(`Element with selector=${n} was not found!`);{const s=r.body,l={childList:!0,subtree:!0},u=e.get((e=>{for(const s of e)if("childList"===s.type){const e=r.querySelector(n);if(e){t.give(e,o),u.disconnect();break}}}));u.observe(s,l)}}})))},e.fetched=(e,n,r)=>{const o=t.sourceOf();return t.value(t.sourceAll([n,e]),t.patron((([e,n])=>{n.fetch(e).then((e=>{let t;return t="application/json"===e.headers.get("Content-Type")?e.json():e.text(),e.ok?t:Promise.reject(t)})).then((e=>{t.give(e,o)})).catch((e=>{t.give(e,r)}))}))),o},e.historyNewPate=(e,n)=>r=>{t.value(t.sourceAll([n,e]),t.guestCast(r,(([e,n])=>{n.pushState({url:e,date:Date.now()},"",e),t.give(e,r)})))},e.historyPoppedPage=(e,n)=>{const r=t.sourceOf(),o=e=>{const{state:n}=e;n?.url&&t.give(String(n.url),r)};return t.value(e,t.patronOnce((e=>{e.addEventListener("popstate",o)}))),t.value(n,t.patronOnce((()=>{t.destroy([r]),t.value(e,(e=>{e.removeEventListener("popstate",o)}))}))),r},e.html=(e,n)=>(t.value(t.sourceAll([n,e]),t.patron((([e,t])=>{t.innerHTML=e}))),n),e.input=(e,n)=>{const r=()=>{t.value(n,(t=>{e.give(t.value)}))};let o=null;return t.value(n,t.patron((e=>{o&&(e.removeEventListener("keyup",r),e.removeEventListener("change",r)),e.addEventListener("keyup",r),e.addEventListener("change",r),o=e}))),t.value(t.sourceAll([e,n]),t.patron((([e,t])=>{t.value=String(e)}))),e},e.log=(e,n,r)=>{const o=t.sourceAll([r,n,e]);return t.value(o,t.patron((([e,t,n])=>{n.log("LOG:",t,e)}))),r},e.styleInstalled=(e,n)=>r=>{t.value(t.sourceAll([e,n]),t.guestCast(r,(([e,n])=>{const o=e.createElement("style");o.textContent=n,e.head.appendChild(o),t.give(n,r)})))},e.text=(e,n)=>(t.value(t.sourceAll([e,n]),t.patron((([e,t])=>{t.textContent=e}))),e)}({},silentium);
