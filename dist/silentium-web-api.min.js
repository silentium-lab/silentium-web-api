!function(t,e){"use strict";var s=Object.defineProperty,r=(t,e,r)=>((t,e,r)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,e+"",r);t.Attribute=class{constructor(t,e,s=""){this.element=t,this.attrName=e,this.defaultValue=s}value(t){return e.value(this.element,new e.GuestCast(t,(s=>{e.give(s.getAttribute(this.attrName)||this.defaultValue,t)}))),this}},t.Element=class{constructor(t){this.selector=t}value(t){return e.value(this.selector,new e.GuestCast(t,(s=>{const r=document.querySelector(s);if(r)e.give(r,t);else{const r=document.body,o={childList:!0,subtree:!0},i=new MutationObserver((r=>{for(const o of r)if("childList"===o.type){const r=document.querySelector(s);if(r){e.give(r,t),i.disconnect();break}}}));i.observe(r,o)}}))),this}},t.Fetched=class{constructor(t){this.errors=t,r(this,"source",new e.SourceWithPool)}do(){return new e.Guest((t=>{fetch(t.url,t).then((e=>e.ok?t.asJson?e.json():e.text():Promise.reject(new Error("Error of status "+e.status)))).then((t=>{this.source.give(t)})).catch((t=>{this.errors.give(t)}))}))}result(){return this.source}},t.HistoryNewPage=class{give(t){return t===location.href.replace(location.origin,"")||history.pushState({url:t,date:Date.now()},"Loading...",t),this}},t.HistoryPoppedPage=class{constructor(t){this.pageSource=t}watchPop(){window.addEventListener("popstate",(t=>{const{state:s}=t;s?.url&&e.give(s.url,this.pageSource)}))}},t.Log=class{constructor(t=""){this.title=t}introduction(){return"patron"}give(t){return console.log("LOG: ",this.title,t),this}},t.StyleInstalled=class{give(t){const e=document.createElement("style");return e.textContent=t,document.head.appendChild(e),this}}}({},patronOop);
