var silentiumWebApi=function(e,t){"use strict";return e.Element=function(e){return t.Message((function(){e.pipe(t.Tap((e=>{const t=document.querySelector(e);if(t)this.use(t);else{const t=document,r={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id"]},s=new MutationObserver((t=>{for(const r of t)if("childList"===r.type){if((t=>{for(const r of Array.from(t))if(r.nodeType===Node.ELEMENT_NODE){const t=r;if(t.matches&&t.matches(e))return this.use(t),s.disconnect(),!0;if(t.querySelector&&t.querySelector(e)){const r=t.querySelector(e);return this.use(r),s.disconnect(),!0}}return!1})(r.addedNodes))break}else if("attributes"===r.type){const t=r.target;if(t.matches&&t.matches(e)){this.use(t),s.disconnect();break}}}));s.observe(t,r)}})))}))},e.Elements=function(e){return t.Message((function(){e.pipe(t.Tap((e=>{const t=document.querySelectorAll(e);if(t.length>0)this.use(Array.from(t));else{const t=document,r={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id"]},s=new MutationObserver((t=>{for(const r of t)if("childList"===r.type){if((t=>{for(const r of Array.from(t))if(r.nodeType===Node.ELEMENT_NODE){const t=r;if(t.matches&&t.matches(e)){const t=document.querySelectorAll(e);if(t.length>0)return this.use(Array.from(t)),s.disconnect(),!0}if(t.querySelector&&t.querySelector(e)){const t=document.querySelectorAll(e);if(t.length>0)return this.use(Array.from(t)),s.disconnect(),!0}}return!1})(r.addedNodes))break}else if("attributes"===r.type){const t=r.target;if(t.matches&&t.matches(e)){const t=document.querySelectorAll(e);if(t.length>0){this.use(Array.from(t)),s.disconnect();break}}}}));s.observe(t,r)}})))}))},e.FetchedData=function(e,r,s){return t.Message((function(){const n=new AbortController;s&&s.pipe(t.Tap((e=>{e&&n.abort()}))),e.pipe(t.Tap((e=>{const{baseUrl:t,url:s,method:o,credentials:i,headers:c,body:u,query:a}=e;let l;try{l=new URL(String(s),t)}catch{return void r?.use(new Error("Invalid URL"))}Object.entries(a??{}).forEach((([e,t])=>l.searchParams.append(e,String(t))));const d={method:o,credentials:i,headers:c,body:u,signal:n.signal};fetch(l.toString(),d).then((e=>e.text())).then((e=>this.use(e))).catch((e=>{e?.(e)}))})))}))},e.Log=function(e){return t.Tap((t=>{console.log(e,t)}))},e.RequestJson=function(e,r){return t.Message((function(){e.pipe(t.Tap((e=>{try{this.use({...e,headers:{...e.headers??{},"Content-Type":"application/json"},body:JSON.stringify(e.body)})}catch{r?.use(new Error("Failed to parse JSON"))}})))}))},e.Timer=function(e){return t.Message((t=>{setTimeout((()=>{t.use(e)}),e)}))},e}({},silentium);
