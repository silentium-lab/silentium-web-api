!function(e,t){"use strict";e.attribute=(e,o,r="")=>{const s=t.sourceOf();return t.subSourceMany(s,[e,o,r]),t.value(t.sourceAll([e,o,r]),t.patron((([e,o,r])=>{t.give(e.getAttribute(o)||r,s)}))),s},e.element=(e,o,r)=>s=>{t.value(t.sourceAll([e,o]),t.guestCast(s,(([e,o])=>{const n=o.querySelector(e);if(n)t.give(n,s);else{if(!r)throw new Error(`Element with selector=${e} was not found!`);{const n=o.body,l={childList:!0,subtree:!0},u=r.get((r=>{for(const n of r)if("childList"===n.type){const r=o.querySelector(e);if(r){t.give(r,s),u.disconnect();break}}}));u.observe(n,l)}}})))},e.fetched=(e,o,r)=>{const s=t.sourceOf();return t.value(t.sourceAll([e,r]),t.patron((([e,r])=>{r.fetch(e).then((e=>{let t;return t="application/json"===e.headers.get("Content-Type")?e.json():e.text(),e.ok?t:Promise.reject(t)})).then((e=>{t.give(e,s)})).catch((e=>{t.give(e,o)}))}))),s},e.historyNewPate=(e,o)=>r=>{t.value(t.sourceAll([e,o]),t.guestCast(r,(([e,o])=>{o.pushState({url:e,date:Date.now()},"",e),t.give(e,r)})))},e.historyPoppedPage=(e,o)=>{const r=t.sourceOf(),s=e=>{const{state:o}=e;o?.url&&t.give(String(o.url),r)};return t.value(o,t.patronOnce((e=>{e.addEventListener("popstate",s)}))),t.value(e,t.patronOnce((()=>{t.destroy([r]),t.value(o,(e=>{e.removeEventListener("popstate",s)}))}))),r},e.log=(e,o="",r=console)=>{const s=t.sourceAll([e,o,r]);return t.value(s,t.patron((([e,t,o])=>{o.log("LOG:",t,e)}))),e},e.styleInstalled=(e,o)=>r=>{t.value(t.sourceAll([e,o]),t.guestCast(r,(([e,o])=>{const s=e.createElement("style");s.textContent=o,e.head.appendChild(s),t.give(e,r)})))}}({},silentium);
